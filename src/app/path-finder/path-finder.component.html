<div class="main">
  <div class="instructions-panel">
    <div class="retro-box">
      <h2 style="text-align: center;"><b>How to Use the Pathfinding Visualizer</b></h2>
      <ol>
        <li><strong>Select Start &amp; Destination:</strong> Click on any two hexagons to set the start and destination points.</li>
        <li><strong>Choose an Algorithm:</strong> Use the buttons to run different pathfinding algorithms:
          <ul>
            <li>Dijkstra's Algo</li>
            <li>A* Manhattan</li>
            <li>A* Manhattan + Traffic</li>
            <li>A* Chebyshev</li>
          </ul>
        </li>
        <li><strong>Reset the Grid:</strong> Click the <b>Reset</b> button to clear the grid (traffic remains). Use the toggle switch to reset start/destination selections.</li>
        <li><strong>Capture &amp; View Screenshots:</strong> Click the camera button to capture the current grid. Hover over the gallery icon to view your captures. Click a thumbnail to preview it. In the preview, use <b>Clone</b> to duplicate or <b>×</b> to close.</li>
        <li><strong>Explore &amp; Experiment:</strong> Try different algorithms and traffic patterns to see how paths change!</li>
      </ol>
      <p><em>Tip: You can interact with the grid and controls as much as you like—refresh the page to start over at any time.</em></p>
    </div>
  </div>
  <div class="centered-content">
    <div class="hexContainer">
      <canvas
        id ="hexCanvas"
        #hexCanvas
        (click)="onHexClick($event)"
        width="685"
        height="645"
      ></canvas>
      <div class="camera-container">
        <button class="camera-btn" (click)="captureCanvas()">
          <div class="camera-top"></div>
          <div class="lens"></div></button>
      </div>
    </div>
    <div class="controls">
      <button class="retro-btn" (click)="findPath_Dijkstra()" [disabled]="disabledFlag()">Dijkstra's Algo</button>
      <button class="retro-btn" (click)="findPath_ManhattanDist()" [disabled]="disabledFlag()">A* Manhattan</button>
      <button class="retro-btn" (click)="findPath_ManhattanDist_Fast()" [disabled]="disabledFlag()">A* Manhattan + No Traffic</button>
      <button class="retro-btn" (click)="findPath_Chebyshev()" [disabled]="disabledFlag()">A* Chebyshev</button>
      <button class="retro-btn" (click)="resetCanvasKeepTraffic()">Reset</button>
      <label class="toggle-vert" title="Reset start/destination">
        <input type="checkbox" [(ngModel)]="resetSelections" />
        <span class="slider-vert"></span>
      </label>
      <div class="captures" *ngIf="captures.length" (mouseleave)="toggleThumbnails(false)">
        <div class="gallery-icon"(mouseenter)="toggleThumbnails(true)"></div>
        <div class="thumbnail-dock">
          <div class="thumbnail" *ngFor="let cap of captures" (click)="openPreview(cap)">
            <img  [src]="cap" alt="thumbnail"/>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="right-panel">
    <div class="algo-description-panel" *ngIf="algorithmDescription">
      <div class="retro-box" [innerHTML]="algorithmDescription"></div>
    </div>
    <div class="efforts-distance" *ngIf="efforts || distance">
      <div class="retro-box" *ngIf="efforts">Efforts : {{efforts}} units</div>
      <div class="retro-box" *ngIf="distance">Distance : {{distance}} units</div>
    </div>
  </div>
  <div class="preview-overlay" *ngIf="selectedCapture" (click)="closePreview()">
    <div class="preview" (click)="$event.stopPropagation()">
      <img [src]="selectedCapture!" />
      <button class="clone-btn" (click)="cloneSelected()">Clone</button>
      <button class="close-btn" (click)="closePreview()">×</button>
    </div>
  </div>
</div>
